<main>
    <section class="user-info">
        <div class="photo-cover">
          <img *ngIf="user.media" [src]="getPathToCurrentCover()" alt="cover">
        </div>
        <div class="user-avatar-back">
          <div class="user-avatar">
            <img *ngIf="user.media" [src]="getPathToCurrentAvatar()" alt="avatar" />
          </div>
        </div>
        <div class="flex fd-r jc-sb ai-c">
          <div class="flex fd-c">
            <span *ngIf="user.profileInfo; else empty_name" class="source-name">{{ user.profileInfo.name }}</span>
            <ng-template #empty_name>
              <span class="empty-source-name"></span>
            </ng-template>
            <span *ngIf="user.profileInfo; else empty_username" class="nick-name">@{{ user.profileInfo.username }}</span>
            <ng-template #empty_username>
              <span class="empty-nick-name"></span>
            </ng-template>
          </div>
          <button *ngIf="!itIsMe" class="btn btn-outlined profile-action-btn">Follow</button>
          <button *ngIf="itIsMe" class="btn btn-outlined profile-action-btn" (click)="editProfileFlag = true">Edit profile</button>
        </div>
        <div class="flex fd-r jc-fe">
          <div class="wrap-info flex fd-c">
            <div *ngIf="user.profileInfo; else empty_bio" class="bio">{{ user.profileInfo.bio }}</div>
            <ng-template #empty_bio>
              <div class="empty-bio"></div>
            </ng-template>
            <ul class="follow-wrap flex fd-r jc-sb">
              <li class=""><span *ngIf="user.profileInfo; else empty_count_posts">30</span>
                <ng-template #empty_count_posts>
                  <span class="empty-count"></span>
                </ng-template> posts
              </li>
              <li class=""><span *ngIf="user.profileInfo; else empty_count_followers">24</span>
                <ng-template #empty_count_followers>
                  <span class="empty-count"></span>
                </ng-template> followers</li>
              <li class=""><span *ngIf="user.profileInfo; else empty_count_following">10</span>
                <ng-template #empty_count_following>
                  <span class="empty-count"></span>
                </ng-template> following</li>
            </ul>
            <ul *ngIf="user.profileInfo; else empty_short_info" class="short-info flex fd-r">
              <li class="residence">Zhytomyr</li>
              <li class="birthday">Born June 26, 1998</li>
              <li class="relationship">Married</li>
              <li class="more-details"></li>
            </ul>
            <ng-template #empty_short_info>
              <ul class="empty-short-info flex fd-r">
                <li></li>
                <li></li>
                <li></li>
                <li class="more-details"></li>
              </ul>
            </ng-template>
          </div>
        </div>
    </section>

    <app-edit-profile-popup
        *ngIf="editProfileFlag && itIsMe"
        (onClose)="editProfileFlag = false"
        [user] = "user"
    ></app-edit-profile-popup>    

    <section class="user-wall">
        <app-post-form [me]="me"></app-post-form>
        <section class="wall-header flex row jc-sb">
          <div data-container="post-switches">
            <button data-action="loadAll" data-state="active">All posts</button>
            <button data-action="loadByMe" data-state="inactive">
              Written by me
            </button>
          </div>
          <form action="" method="get" class="search-form flex col jc-c">
            <input
              type="search"
              name="search_field"
              placeholder="Search for people and groups"
              autocomplete="off"
            />
          </form>
        </section>
        <app-post [isOnWall]="true"></app-post>
    </section>      
</main>