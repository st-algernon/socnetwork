(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"3eyw":function(t,n,e){"use strict";e.d(n,"a",function(){return s});var o=e("fXoL"),i=e("ofXK");function c(t,n){1&t&&o.Lb(0,"div",14)}let s=(()=>{class t{constructor(){this.withMedia=!1}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=o.Eb({type:t,selectors:[["app-empty-post"]],inputs:{withMedia:"withMedia"},decls:17,vars:1,consts:[[1,"post"],[1,"post-header","flex","ai-c"],[1,"avatar-box","square-48"],[1,"flex","fd-c"],[1,"empty","source-name","blink"],[1,"empty","nick-name","blink"],[1,"post-body"],[1,"empty","post-text","blink"],["class","empty photos-container blink",4,"ngIf"],[1,"post-footer","flex","jc-sb","ai-c"],[1,"content-actions","flex","fd-r","jc-sb"],[1,"flex","ai-c"],[1,"blink","empty","round","square-24"],[1,"flex","fd-r"],[1,"empty","photos-container","blink"]],template:function(t,n){1&t&&(o.Pb(0,"section",0),o.Pb(1,"div",1),o.Lb(2,"div",2),o.Pb(3,"div",3),o.Lb(4,"span",4),o.Lb(5,"span",5),o.Ob(),o.Ob(),o.Pb(6,"div",6),o.Lb(7,"div",7),o.oc(8,c,1,0,"div",8),o.Ob(),o.Pb(9,"div",9),o.Pb(10,"ul",10),o.Pb(11,"li",11),o.Lb(12,"span",12),o.Ob(),o.Pb(13,"li",11),o.Lb(14,"span",12),o.Ob(),o.Pb(15,"li",13),o.Lb(16,"span",12),o.Ob(),o.Ob(),o.Ob(),o.Ob()),2&t&&(o.zb(8),o.dc("ngIf",n.withMedia))},directives:[i.k],styles:[".post[_ngcontent-%COMP%]{background:#fff;border-radius:15px;padding:12px 16px;color:#272727;margin-bottom:10px;cursor:wait}.post[_ngcontent-%COMP%]   .post-header[_ngcontent-%COMP%]   .avatar-box[_ngcontent-%COMP%]{margin-right:10px}.empty[_ngcontent-%COMP%]{background:#eee;border-radius:10px}.post-header[_ngcontent-%COMP%]   .empty.source-name[_ngcontent-%COMP%]{width:150px;height:18px;margin-bottom:5px}.post-header[_ngcontent-%COMP%]   .empty.nick-name[_ngcontent-%COMP%]{width:80px;height:14px}.post-body[_ngcontent-%COMP%]   .empty.post-text[_ngcontent-%COMP%]{margin-top:10px;height:16px;width:60%}.post-body[_ngcontent-%COMP%]   .empty.photos-container[_ngcontent-%COMP%]{height:180px;width:100%;border-radius:15px;margin-top:8px}.post-footer[_ngcontent-%COMP%]{margin-top:10px}.post-footer[_ngcontent-%COMP%]   .content-actions[_ngcontent-%COMP%]{flex-basis:200px}.content-actions[_ngcontent-%COMP%]{list-style:none}.blink[_ngcontent-%COMP%]{background:#eee;-webkit-animation:blinker 2s infinite;animation:blinker 2s infinite}@-webkit-keyframes blinker{50%{background:#f5f5f5}}@keyframes blinker{50%{background:#f5f5f5}}"]}),t})()},"668k":function(t,n,e){"use strict";e.d(n,"a",function(){return i});var o=e("fXoL");let i=(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=o.Eb({type:t,selectors:[["app-loader"]],decls:9,vars:0,consts:[["id","floatingCirclesG"],["id","frotateG_01",1,"f_circleG"],["id","frotateG_02",1,"f_circleG"],["id","frotateG_03",1,"f_circleG"],["id","frotateG_04",1,"f_circleG"],["id","frotateG_05",1,"f_circleG"],["id","frotateG_06",1,"f_circleG"],["id","frotateG_07",1,"f_circleG"],["id","frotateG_08",1,"f_circleG"]],template:function(t,n){1&t&&(o.Pb(0,"div",0),o.Lb(1,"div",1),o.Lb(2,"div",2),o.Lb(3,"div",3),o.Lb(4,"div",4),o.Lb(5,"div",5),o.Lb(6,"div",6),o.Lb(7,"div",7),o.Lb(8,"div",8),o.Ob())},styles:["[_nghost-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;justify-content:center}#floatingCirclesG[_ngcontent-%COMP%]{position:relative;width:51px;height:51px;margin:0 auto;transform:scale(.6);-ms-transform:scale(.6)}.f_circleG[_ngcontent-%COMP%]{position:absolute;background-color:#d9d9d9;height:9px;width:9px;border-radius:5px;-ms-border-radius:5px;-webkit-animation-name:f_fadeG;animation-name:f_fadeG;-ms-animation-name:f_fadeG;-webkit-animation-duration:1.2s;animation-duration:1.2s;-ms-animation-duration:1.2s;-webkit-animation-iteration-count:infinite;animation-iteration-count:infinite;-ms-animation-iteration-count:infinite;-webkit-animation-direction:normal;animation-direction:normal;-ms-animation-direction:normal}#frotateG_01[_ngcontent-%COMP%]{left:0;top:21px;-webkit-animation-delay:.45s;animation-delay:.45s;-ms-animation-delay:.45s}#frotateG_02[_ngcontent-%COMP%]{left:6px;top:6px;-webkit-animation-delay:.6s;animation-delay:.6s;-ms-animation-delay:.6s}#frotateG_03[_ngcontent-%COMP%]{left:21px;top:0;-webkit-animation-delay:.75s;animation-delay:.75s;-ms-animation-delay:.75s}#frotateG_04[_ngcontent-%COMP%]{right:6px;top:6px;-webkit-animation-delay:.9s;animation-delay:.9s;-ms-animation-delay:.9s}#frotateG_05[_ngcontent-%COMP%]{right:0;top:21px;-webkit-animation-delay:1.05s;animation-delay:1.05s;-ms-animation-delay:1.05s}#frotateG_06[_ngcontent-%COMP%]{right:6px;bottom:6px;-webkit-animation-delay:1.2s;animation-delay:1.2s;-ms-animation-delay:1.2s}#frotateG_07[_ngcontent-%COMP%]{left:21px;bottom:0;-webkit-animation-delay:1.35s;animation-delay:1.35s;-ms-animation-delay:1.35s}#frotateG_08[_ngcontent-%COMP%]{left:6px;bottom:6px;-webkit-animation-delay:1.5s;animation-delay:1.5s;-ms-animation-delay:1.5s}@-webkit-keyframes f_fadeG{0%{background-color:#1da1f2}to{background-color:hsla(0,0%,74.1%,.32)}}@keyframes f_fadeG{0%{background-color:#1da1f2}to{background-color:hsla(0,0%,74.1%,.32)}}"]}),t})()},F6UI:function(t,n,e){"use strict";e.d(n,"a",function(){return f});var o=e("J2l8"),i=e("fXoL"),c=e("ofXK"),s=e("G1Gu"),r=e("tyNb"),a=e("668k");const d=function(t){return["/search","hashtag",t]};function b(t,n){if(1&t&&(i.Pb(0,"li"),i.Pb(1,"a",8),i.Pb(2,"div",9),i.qc(3),i.Ob(),i.Pb(4,"div",10),i.Pb(5,"span",11),i.qc(6),i.Ob(),i.qc(7," posts"),i.Ob(),i.Ob(),i.Ob()),2&t){const t=n.$implicit;i.zb(1),i.dc("routerLink",i.fc(3,d,t.content)),i.zb(2),i.sc("#",t.content,""),i.zb(3),i.rc(t.amount)}}function m(t,n){if(1&t&&(i.Pb(0,"ng-scrollbar",6),i.oc(1,b,8,5,"li",7),i.Ob()),2&t){const t=i.Yb();i.zb(1),i.dc("ngForOf",t.tags)}}function l(t,n){1&t&&i.Lb(0,"app-loader")}let f=(()=>{class t{constructor(t){this.tagsService=t,this.subs=[]}ngOnInit(){this.subs.push(this.tagsService.getTrends().subscribe(t=>{console.log(t),this.tags=t}))}ngOnDestroy(){this.subs.forEach(t=>{t.unsubscribe()})}}return t.\u0275fac=function(n){return new(n||t)(i.Kb(o.a))},t.\u0275cmp=i.Eb({type:t,selectors:[["app-trends"]],decls:9,vars:2,consts:[[1,"trends"],[1,"trends-header"],[1,"trends-body"],["visibility","hover","appearance","standard",4,"ngIf","ngIfElse"],["loading",""],[1,"trends-footer"],["visibility","hover","appearance","standard"],[4,"ngFor","ngForOf"],[1,"trend-item",3,"routerLink"],[1,"trend-item-body"],[1,"trend-item-footer"],[1,"count-posts"]],template:function(t,n){if(1&t&&(i.Pb(0,"div",0),i.Pb(1,"div",1),i.Pb(2,"h2"),i.qc(3,"\u0422\u0440\u0435\u043d\u0434\u0438"),i.Ob(),i.Ob(),i.Pb(4,"ul",2),i.oc(5,m,2,1,"ng-scrollbar",3),i.oc(6,l,1,0,"ng-template",null,4,i.pc),i.Ob(),i.Lb(8,"div",5),i.Ob()),2&t){const t=i.kc(7);i.zb(5),i.dc("ngIf",n.tags)("ngIfElse",t)}},directives:[c.k,s.a,c.j,r.e,a.a],styles:["ng-scrollbar[_ngcontent-%COMP%]{--scrollbar-track-color:rgba(0,0,0,0.05);--scrollbar-thumb-color:rgba(0,0,0,0.2);--scrollbar-thumb-hover-color:rgba(0,0,0,0.3)}.trends[_ngcontent-%COMP%]{margin-bottom:15px;border-radius:15px;padding:0 6px 8px;background-color:#fff}.trends-footer[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], .trends-header[_ngcontent-%COMP%]{padding:8px 16px}.trends-header[_ngcontent-%COMP%]{color:#222}.trends-body[_ngcontent-%COMP%]{padding:4px 0 4px 4px;height:168px;background-color:#f7f9fa}.trends-body[_ngcontent-%COMP%], .trends-body[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-radius:15px}.trends-body[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e5f2fc}.trends-body[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-of-type   .trend-item[_ngcontent-%COMP%]{border-bottom:none}.trends[_ngcontent-%COMP%]   .trend-item[_ngcontent-%COMP%]{display:block;border-bottom:1px solid #e6eef5;padding:8px 0;margin:0 5%}.trend-item-body[_ngcontent-%COMP%]{color:#222;font-weight:700}.trend-item-footer[_ngcontent-%COMP%]{font-size:13px;color:#919191}.trends-footer[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{display:block;cursor:pointer}"]}),t})()},Sqts:function(t,n,e){"use strict";e.d(n,"a",function(){return a});var o=e("fXoL"),i=e("ofXK");function c(t,n){if(1&t&&(o.Pb(0,"div",3),o.Lb(1,"img",4),o.Ob()),2&t){const t=n.$implicit;o.zb(1),o.dc("src",t.path,o.mc)}}const s=function(t,n,e,o){return{vertical:t,horizontal:n,sm:e,lg:o}};function r(t,n){if(1&t&&(o.Pb(0,"div",1),o.oc(1,c,2,1,"div",2),o.Ob()),2&t){const t=o.Yb();o.dc("ngClass",o.ic(2,s,2==t.photos.length,2!=t.photos.length,"small"==t.size,"large"==t.size)),o.zb(1),o.dc("ngForOf",t.photos)}}let a=(()=>{class t{constructor(){this.photos=[],this.size="small"}ngOnInit(){}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=o.Eb({type:t,selectors:[["app-photos-container"]],inputs:{photos:"photos",size:"size"},decls:1,vars:1,consts:[["class","photos-container flex fw-w",3,"ngClass",4,"ngIf"],[1,"photos-container","flex","fw-w",3,"ngClass"],["class","photo-item fg-1",4,"ngFor","ngForOf"],[1,"photo-item","fg-1"],["alt","photo",3,"src"]],template:function(t,n){1&t&&o.oc(0,r,2,7,"div",0),2&t&&o.dc("ngIf",n.photos)},directives:[i.k,i.i,i.j],styles:[".photos-container[_ngcontent-%COMP%]{border-radius:15px;background-color:#f7f9fa;overflow:hidden}.photos-container.sm[_ngcontent-%COMP%]{height:168px}.photos-container.lg[_ngcontent-%COMP%]{height:228px}.photos-container[_ngcontent-%COMP%]   .photo-item[_ngcontent-%COMP%]{position:relative}.photos-container.horizontal[_ngcontent-%COMP%]{flex-direction:column}.photos-container.horizontal[_ngcontent-%COMP%]   .photo-item[_ngcontent-%COMP%]{height:50%}.photos-container.vertical[_ngcontent-%COMP%]{flex-direction:row}.photos-container.vertical[_ngcontent-%COMP%]   .photo-item[_ngcontent-%COMP%]{width:50%}.photos-container[_ngcontent-%COMP%]   .photo-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;max-width:100%;min-width:100%;max-height:100%;min-height:100%;-o-object-fit:cover;object-fit:cover;padding:.5px;box-sizing:border-box}"]}),t})()},Xui1:function(t,n,e){"use strict";e.d(n,"d",function(){return o}),e.d(n,"a",function(){return i}),e.d(n,"b",function(){return c}),e.d(n,"c",function(){return s});var o=function(t){return t[t.UnFollowed=0]="UnFollowed",t[t.Followed=1]="Followed",t[t.Blocked=2]="Blocked",t}({}),i=function(t){return t[t.Avatar=0]="Avatar",t[t.Cover=1]="Cover",t}({}),c=function(t){return t[t.Followed=0]="Followed",t[t.Liked=1]="Liked",t[t.Reposted=2]="Reposted",t[t.Commented=3]="Commented",t}({}),s=function(t){return t[t.None=0]="None",t[t.Post=1]="Post",t[t.Comment=2]="Comment",t}({})},c3AP:function(t,n,e){"use strict";e.d(n,"a",function(){return f});var o=e("dxD2"),i=e("fXoL"),c=e("ofXK"),s=e("G1Gu"),r=e("tyNb"),a=e("668k");const d=function(t){return["/",t]};function b(t,n){if(1&t&&(i.Pb(0,"li"),i.Pb(1,"a",8),i.Pb(2,"div",9),i.Lb(3,"img",10),i.Ob(),i.Pb(4,"div",11),i.Pb(5,"div",12),i.Pb(6,"div",13),i.Pb(7,"div",14),i.qc(8),i.Ob(),i.Pb(9,"div",15),i.qc(10),i.Ob(),i.Ob(),i.Pb(11,"button",16),i.qc(12,"\u0421\u0442\u0435\u0436\u0438\u0442\u0438"),i.Ob(),i.Ob(),i.Ob(),i.Ob(),i.Ob()),2&t){const t=n.$implicit;i.zb(1),i.dc("routerLink",i.fc(4,d,t.username)),i.zb(2),i.dc("src",t.avatarPath,i.mc),i.zb(5),i.rc(t.name),i.zb(2),i.sc("@",t.username,"")}}function m(t,n){if(1&t&&(i.Pb(0,"ng-scrollbar",6),i.oc(1,b,13,6,"li",7),i.Ob()),2&t){const t=i.Yb();i.zb(1),i.dc("ngForOf",t.users)}}function l(t,n){1&t&&i.Lb(0,"app-loader")}let f=(()=>{class t{constructor(t){this.usersService=t,this.subs=[]}ngOnInit(){this.subs.push(this.usersService.getFollowOffers().subscribe(t=>{this.users=t}))}ngOnDestroy(){this.subs.forEach(t=>{t.unsubscribe()})}}return t.\u0275fac=function(n){return new(n||t)(i.Kb(o.a))},t.\u0275cmp=i.Eb({type:t,selectors:[["app-follow-offers"]],decls:9,vars:2,consts:[[1,"follow-offers"],[1,"follow-offers-header"],[1,"follow-offers-body"],["visibility","hover","appearance","standard",4,"ngIf","ngIfElse"],["loading",""],[1,"follow-offers-footer"],["visibility","hover","appearance","standard"],[4,"ngFor","ngForOf"],[1,"follow-offer-item","flex",3,"routerLink"],[1,"avatar-box","square-40"],["alt","avatar",1,"square-40",3,"src"],[1,"flex","fg-1","fd-c"],[1,"flex","fd-r","jc-sb","ai-c"],[1,"flex","fd-c","fg-1"],[1,"source-name"],[1,"nick-name"],[1,"btn","btn-sm","btn-outlined"]],template:function(t,n){if(1&t&&(i.Pb(0,"div",0),i.Pb(1,"div",1),i.Pb(2,"h2"),i.qc(3,"\u041f\u0440\u043e\u043f\u043e\u0437\u0438\u0446\u0456\u0457"),i.Ob(),i.Ob(),i.Pb(4,"ul",2),i.oc(5,m,2,1,"ng-scrollbar",3),i.oc(6,l,1,0,"ng-template",null,4,i.pc),i.Ob(),i.Lb(8,"div",5),i.Ob()),2&t){const t=i.kc(7);i.zb(5),i.dc("ngIf",n.users)("ngIfElse",t)}},directives:[c.k,s.a,c.j,r.e,a.a],styles:["ng-scrollbar[_ngcontent-%COMP%]{--scrollbar-track-color:rgba(0,0,0,0.05);--scrollbar-thumb-color:rgba(0,0,0,0.2);--scrollbar-thumb-hover-color:rgba(0,0,0,0.3)}.follow-offers[_ngcontent-%COMP%]{margin-bottom:15px;border-radius:15px;padding:0 6px 8px;background-color:#fff}.follow-offers-footer[_ngcontent-%COMP%] > a[_ngcontent-%COMP%], .follow-offers-header[_ngcontent-%COMP%]{padding:8px 16px}.follow-offers-header[_ngcontent-%COMP%]{color:#222}.follow-offers-body[_ngcontent-%COMP%]{padding:4px 0 4px 4px;height:168px;border-radius:15px;background-color:#f7f9fa}.follow-offers-body[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{border-radius:15px}.follow-offers-body[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{background-color:#e5f2fc}.follow-offers-body[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:last-of-type   .follow-offer-item[_ngcontent-%COMP%]{border-bottom:none}.follow-offers-body[_ngcontent-%COMP%]   .follow-offer-item[_ngcontent-%COMP%]{border-bottom:1px solid #e6eef5;padding:8px 0;margin:0 5%}.follow-offer-item[_ngcontent-%COMP%]   .nick-name[_ngcontent-%COMP%], .follow-offer-item[_ngcontent-%COMP%]   .source-name[_ngcontent-%COMP%]{padding-left:12px;max-width:180px;overflow:hidden}.follow-offer-item[_ngcontent-%COMP%]   .bio[_ngcontent-%COMP%]{font-size:14px;max-height:40px;overflow:hidden;color:#333;padding:5px 5px 0 12px}.follow-offers-footer[_ngcontent-%COMP%] > a[_ngcontent-%COMP%]{display:block;cursor:pointer}"]}),t})()},ih9o:function(t,n,e){"use strict";e.d(n,"a",function(){return D});var o=e("Xui1"),i=e("7TfR"),c=e("6pI1"),s=e("yvDh"),r=e("XNvU"),a=e("fXoL"),d=e("tyNb"),b=e("ofXK"),m=e("Sqts"),l=e("3Pt+");const f=["post_text_container"];function p(t,n){if(1&t&&a.Lb(0,"app-photos-container",22),2&t){const t=a.Yb();a.dc("photos",t.post.mediaDTOs)}}function g(t,n){if(1&t&&(a.Pb(0,"div",23),a.qc(1),a.Zb(2,"date"),a.Ob()),2&t){const t=a.Yb();a.zb(1),a.rc(a.ac(2,1,t.post.creationDate,"shortTime","","uk"))}}function u(t,n){if(1&t&&(a.Pb(0,"div",23),a.qc(1),a.Zb(2,"date"),a.Ob()),2&t){const t=a.Yb();a.zb(1),a.rc(a.ac(2,1,t.post.creationDate,"mediumDate","","uk"))}}function h(t,n){if(1&t&&a.Lb(0,"app-photos-container",46),2&t){const t=a.Yb().$implicit;a.dc("photos",t.mediaDTOs)}}function O(t,n){if(1&t&&(a.Pb(0,"div",23),a.qc(1),a.Zb(2,"date"),a.Ob()),2&t){const t=a.Yb().$implicit;a.zb(1),a.rc(a.ac(2,1,t.creationDate,"shortTime","","uk"))}}function P(t,n){if(1&t&&(a.Pb(0,"div",23),a.qc(1),a.Zb(2,"date"),a.Ob()),2&t){const t=a.Yb().$implicit;a.zb(1),a.rc(a.ac(2,1,t.creationDate,"mediumDate","","uk"))}}const C=function(t){return{"fg-1":t}},_=function(t){return{clicked:t}},k=function(t){return{invisible:t}};function x(t,n){if(1&t){const t=a.Qb();a.Pb(0,"div",30),a.Pb(1,"div",31),a.Pb(2,"div",32),a.Lb(3,"img",33),a.Ob(),a.Ob(),a.Pb(4,"div",34),a.Pb(5,"div",13),a.Pb(6,"div",35),a.Pb(7,"div",36),a.Pb(8,"div",37),a.Pb(9,"span",5),a.qc(10),a.Ob(),a.Ob(),a.Ob(),a.Pb(11,"div",38),a.Pb(12,"div",39),a.qc(13),a.Ob(),a.oc(14,h,1,1,"app-photos-container",40),a.Ob(),a.Ob(),a.Pb(15,"div",41),a.Pb(16,"div",13),a.Pb(17,"span",42,43),a.Wb("click",function(){a.lc(t);const e=n.$implicit,o=a.kc(18);return a.Yb(3).likeComment(e,o)}),a.Ob(),a.Pb(19,"span",16),a.qc(20),a.Ob(),a.Ob(),a.Ob(),a.Ob(),a.Pb(21,"div",44),a.Pb(22,"span",45),a.qc(23,"\u0412\u0456\u0434\u043f\u043e\u0432\u0456\u0441\u0442\u0438"),a.Ob(),a.oc(24,O,3,6,"div",20),a.oc(25,P,3,6,"div",20),a.Ob(),a.Ob(),a.Ob()}if(2&t){const t=n.$implicit,e=a.Yb(3);a.zb(3),a.dc("src",t.authorDTO.avatarPath,a.mc),a.zb(1),a.dc("ngClass",a.fc(10,C,t.mediaDTOs.length>0)),a.zb(6),a.rc(t.authorDTO.name),a.zb(3),a.sc(" ",t.text," "),a.zb(1),a.dc("ngIf",t.mediaDTOs.length>0),a.zb(3),a.dc("ngClass",a.fc(12,_,e.commentLiked(t))),a.zb(2),a.dc("ngClass",a.fc(14,k,0==t.likesNumber)),a.zb(1),a.rc(t.likesNumber),a.zb(4),a.dc("ngIf",e.isToday()),a.zb(1),a.dc("ngIf",0==e.isToday())}}function M(t,n){if(1&t){const t=a.Qb();a.Pb(0,"div",47),a.Wb("click",function(){return a.lc(t),a.Yb(3).loadComments()}),a.qc(1,"\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u0438 \u0431\u0456\u043b\u044c\u0448\u0435 \u043a\u043e\u043c\u0435\u043d\u0442\u0430\u0440\u0456\u0432"),a.Ob()}}function v(t,n){if(1&t&&(a.Pb(0,"div",27),a.oc(1,x,26,16,"div",28),a.oc(2,M,2,0,"div",29),a.Ob()),2&t){const t=a.Yb(2);a.zb(1),a.dc("ngForOf",t.comments),a.zb(1),a.dc("ngIf",t.comments.length>0&&!t.commentsLoaded)}}function w(t,n){if(1&t){const t=a.Qb();a.Pb(0,"div",63),a.Pb(1,"div",64),a.Wb("click",function(){return a.lc(t),a.Yb(3).unPreviewImages()}),a.Ob(),a.Lb(2,"app-photos-container",46),a.Ob()}if(2&t){const t=a.Yb(3);a.zb(2),a.dc("photos",t.previewImagesData)}}function y(t,n){if(1&t){const t=a.Qb();a.Pb(0,"div",48),a.Pb(1,"div",49),a.oc(2,w,3,1,"div",50),a.Ob(),a.Pb(3,"div",51),a.Pb(4,"div",32),a.Lb(5,"img",52),a.Ob(),a.Pb(6,"form",53,54),a.Wb("ngSubmit",function(){a.lc(t);const n=a.kc(7);return a.Yb(2).onSubmitComment(n)}),a.Pb(8,"div",55),a.Pb(9,"textarea",56),a.Wb("ngModelChange",function(n){return a.lc(t),a.Yb(2).commentForm.text=n})("keydown",function(n){a.lc(t);const e=a.kc(7);return a.Yb(2).onEnterSubmit(e,n)})("input",function(n){return a.lc(t),a.Yb(2).resizeTextarea(n)}),a.Ob(),a.Pb(10,"ul",57),a.Pb(11,"li",58),a.Wb("click",function(){return a.lc(t),a.kc(13).click()}),a.Pb(12,"input",59,60),a.Wb("change",function(){a.lc(t);const n=a.kc(13);return a.Yb(2).previewImages(n.files)}),a.Ob(),a.Ob(),a.Lb(14,"li",61),a.Ob(),a.Ob(),a.Lb(15,"button",62),a.Ob(),a.Ob(),a.Ob()}if(2&t){const t=a.Yb(2);a.zb(2),a.dc("ngIf",t.previewImagesData.length>0),a.zb(3),a.dc("src",t.me.avatarPath,a.mc),a.zb(4),a.dc("ngModel",t.commentForm.text),a.zb(6),a.dc("disabled",!t.commentForm.text&&0==t.commentForm.images.length)}}function z(t,n){if(1&t){const t=a.Qb();a.Pb(0,"div",24),a.Wb("click",function(n){return a.lc(t),a.Yb().stopPropagation(n)}),a.oc(1,v,3,2,"div",25),a.oc(2,y,16,4,"div",26),a.Ob()}if(2&t){const t=a.Yb();a.zb(1),a.dc("ngIf","all"==t.commentsBehavior||"best"==t.commentsBehavior),a.zb(1),a.dc("ngIf",t.commentMaker)}}const L=function(t,n){return["/",t,"post",n]},I=function(t){return["/",t]};let D=(()=>{class t{constructor(t,n,e,o,i){this.renderer=t,this.postsService=n,this.mediaService=e,this.postsHub=o,this.notificsHub=i,this.commentsBehavior="best",this.commentMaker=!0,this.comments=[],this.commentsLoaded=!1,this.previewImagesData=[],this.subs=[],this.commentForm={text:"",images:[]}}ngOnInit(){this.renderTextWithHashtags(this.post.text,this.postTextContainer.nativeElement),"all"==this.commentsBehavior?this.loadComments():"best"==this.commentsBehavior&&this.post.bestCommentDTO?this.comments.push(this.post.bestCommentDTO):this.comments=[],this.subs.push(this.postsHub.postLikes$.subscribe(t=>{if(this.post.id==t.postId){let n=this.post.userPostDTOs.findIndex(t=>t.userDTO.id===this.me.id);this.post.userPostDTOs.splice(n,1,t),console.log("from callback",this.post.userPostDTOs.find(t=>t.userDTO.id===this.me.id)),console.log(t),t.isLiked?(this.post.likesNumber++,this.notificsHub.notify({recipientId:this.post.authorDTO.id,subjectId:this.post.id,subjectType:o.c.Post,notificType:o.b.Liked})):this.post.likesNumber--}}),this.postsHub.commentLikes$.subscribe(t=>{let n=this.comments.find(n=>n.id===t.commentId);if(console.log(t),n){let e=n.userCommentDTOs.findIndex(t=>t.userDTO.id===this.me.id);if(n.userCommentDTOs.splice(e,1,t),t.isLiked){const e={recipientId:this.getCommentAuthorById(t.commentId).id,subjectId:t.commentId,subjectType:o.c.Comment,notificType:o.b.Liked};this.notificsHub.notify(e),n.likesNumber++}else n.likesNumber--}}))}ngOnDestroy(){this.subs.forEach(t=>{t.unsubscribe()})}toggleLikePost(t){this.post.userPostDTOs.find(t=>t.userDTO.id==this.me.id&&t.isLiked)?(this.postsHub.unlikePost(this.post.id),t.classList.remove("clicked")):(this.postsHub.likePost(this.post.id),t.classList.add("clicked"))}postLiked(){return this.post.userPostDTOs.some(t=>t.userDTO.id==this.me.id&&t.isLiked)}commentLiked(t){return t.userCommentDTOs.some(t=>t.userDTO.id==this.me.id&&t.isLiked)}likeComment(t,n){t.userCommentDTOs.find(t=>t.userDTO.id==this.me.id&&t.isLiked)?(this.postsHub.unlikeComment(t.id),n.classList.remove("clicked")):(this.postsHub.likeComment(t.id),n.classList.add("clicked"))}stopPropagation(t){t.stopPropagation()}loadComments(){this.subs.push(this.postsService.getComments(this.post.id).subscribe(t=>{console.log(t),this.commentsLoaded=!0,this.comments=t}))}getCommentAuthorById(t){return this.comments.find(n=>n.id=t).authorDTO}renderTextWithHashtags(t,n){const e=t.match(/(#(?:[^\x00-\x7F]|\w)+)/g);if(e){for(let i of e){console.log(t);const e=t.slice(0,t.indexOf(i)),o=this.renderer.createText(e),c=this.renderer.createElement("a");this.renderer.setAttribute(c,"href",`/search/hashtag/${i.slice(1)}`);const s=this.renderer.createText(i);this.renderer.appendChild(n,o),this.renderer.appendChild(c,s),this.renderer.appendChild(n,c),t=t.slice(t.indexOf(i)+i.length)}const o=this.renderer.createText(t);this.renderer.appendChild(n,o)}else n.innerText=t}onSubmitComment(t){if(!this.commentForm.text&&0==this.commentForm.images.length)return;const n={postId:this.post.id,text:this.commentForm.text,mediaDTOs:[]};if(0!=this.commentForm.images.length){const t=new FormData;[...this.commentForm.images].forEach((n,e)=>{t.set("file"+e,n,n.name)}),this.subs.push(this.mediaService.uploadMedia(t).subscribe(t=>{n.mediaDTOs=t,this.subs.push(this.postsService.saveComment(n).subscribe(t=>{console.log(t),this.comments.push(t),this.notificsHub.notify({recipientId:this.post.authorDTO.id,subjectId:this.post.id,subjectType:o.c.Post,notificType:o.b.Commented})})),this.previewImagesData=[]}))}else this.commentForm.text&&this.subs.push(this.postsService.saveComment(n).subscribe(t=>{console.log(t),this.comments.push(t),this.notificsHub.notify({recipientId:this.post.authorDTO.id,subjectId:this.post.id,subjectType:o.c.Post,notificType:o.b.Commented})}));this.commentForm={text:"",images:[]}}onEnterSubmit(t,n){"Enter"!=n.key||n.shiftKey||(n.preventDefault(),this.onSubmitComment(t))}previewImages(t){this.commentForm.images=t,this.previewImagesData=[];for(let n of t)if(n.type.match("image*")){const t=new FileReader;t.onload=t=>{this.previewImagesData.push({id:n.name,mimeType:n.type,path:t.target.result.toString(),size:n.size,creationDate:new Date(n.lastModified)})},t.readAsDataURL(n)}}unPreviewImages(){this.commentForm.images=[],this.previewImagesData=[]}resizeTextarea(t){const n=t.target;n.style.height="auto",n.style.height=5*n.scrollHeight/7+"px"}isToday(){const t=new Date(this.post.creationDate),n=new Date;return t.getDate()==n.getDate()&&t.getMonth()==n.getMonth()&&t.getFullYear()==n.getFullYear()}}return t.\u0275fac=function(n){return new(n||t)(a.Kb(a.E),a.Kb(r.a),a.Kb(s.a),a.Kb(c.a),a.Kb(i.a))},t.\u0275cmp=a.Eb({type:t,selectors:[["app-post"]],viewQuery:function(t,n){if(1&t&&a.uc(f,3),2&t){let t;a.jc(t=a.Xb())&&(n.postTextContainer=t.first)}},inputs:{post:"post",me:"me",commentsBehavior:"commentsBehavior",commentMaker:"commentMaker"},decls:27,vars:24,consts:[[1,"post",3,"routerLink"],[1,"post-header","flex","ai-c"],[1,"avatar-box","square-48",3,"routerLink"],["alt","",1,"square-48",3,"src"],[1,"flex","fd-c",3,"routerLink","click"],[1,"source-name"],[1,"nick-name"],[1,"post-body"],[1,"post-text",3,"click"],["post_text_container",""],["size","large",3,"photos",4,"ngIf"],[1,"post-footer","flex","fd-r","jc-sb","ai-c",3,"click"],[1,"content-actions","flex","fd-r","jc-sb"],[1,"flex","ai-c"],[1,"like-btn","round","r-20","square-32",3,"ngClass","click"],["likePostBtn",""],[1,"count","count-likes",3,"ngClass"],[1,"forward-btn","round","r-20","square-32"],[1,"flex","fd-r"],[1,"comment-btn","round","r-20","square-32",3,"click"],["class","published-date",4,"ngIf"],["class","comments-section",3,"click",4,"ngIf"],["size","large",3,"photos"],[1,"published-date"],[1,"comments-section",3,"click"],["class","comments-container",4,"ngIf"],["class","comments-footer",4,"ngIf"],[1,"comments-container"],["class","comment flex ai-fs",4,"ngFor","ngForOf"],["class","show-more-btn",3,"click",4,"ngIf"],[1,"comment","flex","ai-fs"],[1,"comment-author-avatar"],[1,"avatar-box","square-32"],["alt","",1,"square-32",3,"src"],[1,"flex","fd-c",3,"ngClass"],[1,"comment-header-body-wrapper"],[1,"comment-header"],[1,"flex","fd-c"],[1,"comment-body"],[1,"comment-text"],[3,"photos",4,"ngIf"],[1,"content-actions"],[1,"like-btn","round","r-20","square-28",3,"ngClass","click"],["likeCommentBtn",""],[1,"comment-footer","flex","jc-sb"],[1,"replay-btn"],[3,"photos"],[1,"show-more-btn",3,"click"],[1,"comments-footer"],[1,"flex","jc-c"],["class","preview-container fg-1",4,"ngIf"],[1,"comment-maker","flex","fd-r"],[1,"square-32",3,"src"],["novalidate","",1,"flex","fd-r","ai-c",3,"ngSubmit"],["form","ngForm"],[1,"textarea-attach-wrapper","flex","fd-r","ai-c"],["rows","1","name","commentText","placeholder","\u0417\u0430\u043b\u0438\u0448\u0438\u0442\u0438 \u043a\u043e\u043c\u0435\u043d\u0442\u0430\u0440...",3,"ngModel","ngModelChange","keydown","input"],["data-container","attach",1,"attach","flex","fd-r","jc-sb"],[1,"add-picture-btn","round","r-18","square-28",3,"click"],["type","file","name","commentImages","ngModel","","multiple","",1,"hidden",3,"change"],["input_image",""],[1,"add-emoji-btn","round","r-20","square-28"],["type","submit",1,"submit-btn","square-32",3,"disabled"],[1,"preview-container","fg-1"],[1,"close-btn","round","r-16","square-20",3,"click"]],template:function(t,n){if(1&t){const t=a.Qb();a.Pb(0,"section",0),a.Pb(1,"div",1),a.Pb(2,"div",2),a.Lb(3,"img",3),a.Ob(),a.Pb(4,"div",4),a.Wb("click",function(t){return n.stopPropagation(t)}),a.Pb(5,"span",5),a.qc(6),a.Ob(),a.Pb(7,"span",6),a.qc(8),a.Ob(),a.Ob(),a.Ob(),a.Pb(9,"div",7),a.Pb(10,"span",8,9),a.Wb("click",function(t){return n.stopPropagation(t)}),a.Ob(),a.oc(12,p,1,1,"app-photos-container",10),a.Ob(),a.Pb(13,"div",11),a.Wb("click",function(t){return n.stopPropagation(t)}),a.Pb(14,"ul",12),a.Pb(15,"li",13),a.Pb(16,"span",14,15),a.Wb("click",function(){a.lc(t);const e=a.kc(17);return n.toggleLikePost(e)}),a.Ob(),a.Pb(18,"span",16),a.qc(19),a.Ob(),a.Ob(),a.Pb(20,"li",13),a.Lb(21,"span",17),a.Ob(),a.Pb(22,"li",18),a.Pb(23,"span",19),a.Wb("click",function(){return n.commentMaker=!0}),a.Ob(),a.Ob(),a.Ob(),a.oc(24,g,3,6,"div",20),a.oc(25,u,3,6,"div",20),a.Ob(),a.oc(26,z,3,2,"div",21),a.Ob()}2&t&&(a.dc("routerLink",a.gc(13,L,n.post.authorDTO.username,n.post.id)),a.zb(2),a.dc("routerLink",a.fc(16,I,n.post.authorDTO.username)),a.zb(1),a.dc("src",n.post.authorDTO.avatarPath,a.mc),a.zb(1),a.dc("routerLink",a.fc(18,I,n.post.authorDTO.username)),a.zb(2),a.rc(n.post.authorDTO.name),a.zb(2),a.sc("@",n.post.authorDTO.username,""),a.zb(4),a.dc("ngIf",n.post.mediaDTOs.length>0),a.zb(4),a.dc("ngClass",a.fc(20,_,n.postLiked())),a.zb(2),a.dc("ngClass",a.fc(22,k,0==n.post.likesNumber)),a.zb(1),a.rc(n.post.likesNumber),a.zb(5),a.dc("ngIf",n.isToday()),a.zb(1),a.dc("ngIf",0==n.isToday()),a.zb(1),a.dc("ngIf",n.commentMaker))},directives:[d.c,b.k,b.i,m.a,b.j,l.p,l.i,l.j,l.a,l.h,l.k],pipes:[b.d],styles:[".post[_ngcontent-%COMP%]{background:#fff;border-radius:15px;padding:12px 16px;color:#272727;margin-bottom:10px;cursor:pointer}.post[_ngcontent-%COMP%]   .post-header[_ngcontent-%COMP%]   .avatar-box[_ngcontent-%COMP%]{margin-right:10px}.post-header[_ngcontent-%COMP%]   .source-name[_ngcontent-%COMP%]{font-family:Deezer,Open Sans,sans-serif}.post-header[_ngcontent-%COMP%]   .nick-name[_ngcontent-%COMP%]{font-size:14px}.post[_ngcontent-%COMP%]   .post-body[_ngcontent-%COMP%]{margin:10px 0 8px}.post-body[_ngcontent-%COMP%]   .post-text[_ngcontent-%COMP%]{word-wrap:break-word;margin-bottom:5px;cursor:auto}.post[_ngcontent-%COMP%]   .post-footer[_ngcontent-%COMP%]{position:relative}.post-footer[_ngcontent-%COMP%]   .content-actions[_ngcontent-%COMP%]{flex-basis:200px}.post-footer[_ngcontent-%COMP%]   .published-date[_ngcontent-%COMP%]{font-size:14px;color:#777}.post[_ngcontent-%COMP%]   .comments-section[_ngcontent-%COMP%]{border-top:1px solid #f1f1f1;margin-top:5px;padding-top:10px}.comments-container[_ngcontent-%COMP%]   .comment[_ngcontent-%COMP%]{margin-bottom:5px;font-size:15px;max-width:75%}.comment[_ngcontent-%COMP%]   .comment-header-body-wrapper[_ngcontent-%COMP%]{background-color:#f5f5f5;border-radius:15px;padding:8px 12px;margin:0 6px 0 10px;width:100%}.comment[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]{font-family:Deezer,Open Sans,sans-serif}.comment[_ngcontent-%COMP%]   .comment-header[_ngcontent-%COMP%]   .source-name[_ngcontent-%COMP%]{font-size:15px}.comment[_ngcontent-%COMP%]   .comment-footer[_ngcontent-%COMP%]{padding:0 60px 0 20px}.comment-footer[_ngcontent-%COMP%]   .replay-btn[_ngcontent-%COMP%]{font-size:14px;font-weight:700;color:#444;cursor:pointer}.comment-footer[_ngcontent-%COMP%]   .published-date[_ngcontent-%COMP%]{font-size:14px;color:#777}.comments-section[_ngcontent-%COMP%]   .show-more-btn[_ngcontent-%COMP%]{text-align:center;color:#7f7f7f;cursor:pointer}.comments-section[_ngcontent-%COMP%]   .show-more-btn[_ngcontent-%COMP%]:hover{text-decoration:underline}.comments-footer[_ngcontent-%COMP%]   .preview-container[_ngcontent-%COMP%]{position:relative;margin:0 42px 5px}.comments-footer[_ngcontent-%COMP%]   .preview-container[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;right:5px;top:5px;background-image:url(plus-hover.c5a44e580f069dae6603.png);background-color:#fff;transform:rotate(45deg);border:1px solid #eee;outline:none;z-index:10}.comments-footer[_ngcontent-%COMP%]   .comment-maker[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.comment-maker[_ngcontent-%COMP%]   .textarea-attach-wrapper[_ngcontent-%COMP%]{width:100%;border-radius:15px;border:1px solid #f0f0f0;margin:0 10px}.comment-maker[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{font-size:16px;height:18px;line-height:20px;padding:4px 10px}.comment-maker[_ngcontent-%COMP%]   .attach[_ngcontent-%COMP%]   .add-picture-btn[_ngcontent-%COMP%]{background-image:url(picture.8bab62ef09da605e0ddf.png)}.comment-maker[_ngcontent-%COMP%]   .attach[_ngcontent-%COMP%]   .add-music-btn[_ngcontent-%COMP%]{background-image:url(add-music.9a4176a08125a911c279.png)}.comment-maker[_ngcontent-%COMP%]   .attach[_ngcontent-%COMP%]   .add-video-btn[_ngcontent-%COMP%]{background-image:url(add-video.07c28269d0df8adddcda.png)}.comment-maker[_ngcontent-%COMP%]   .attach[_ngcontent-%COMP%]   .add-emoji-btn[_ngcontent-%COMP%]{position:relative;background-image:url(emoji.a281a630f75958ce1961.png)}.comment-maker[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]{background-image:url(send.5f6c618067a4dc880a72.png);background-repeat:no-repeat;background-color:transparent;background-size:contain;border:none;outline:none;cursor:pointer}.comment-maker[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:disabled{background-image:url(send-disable.3c62a814f1c85dc4bfd5.png);cursor:auto}.content-actions[_ngcontent-%COMP%]{list-style:none}.content-actions[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]{background-image:url(heart.e84055e1429182ab3b47.png);margin-right:5px}.content-actions[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]:hover{background-image:url(heart-hover.2d8a875293c5e51f0b0a.png);background-color:#ffdcdd}.content-actions[_ngcontent-%COMP%]   .like-btn.clicked[_ngcontent-%COMP%]{background-image:url(heart-click.b2c8173da0d295cf7c9d.png)}.content-actions[_ngcontent-%COMP%]   .like-btn.clicked[_ngcontent-%COMP%] ~ .count-likes[_ngcontent-%COMP%], .content-actions[_ngcontent-%COMP%]   .like-btn[_ngcontent-%COMP%]:hover ~ .count-likes[_ngcontent-%COMP%]{color:#f44336}.content-actions[_ngcontent-%COMP%]   .forward-btn[_ngcontent-%COMP%]{background-image:url(forward.d5f508d233026c4a842b.png);margin-right:5px}.content-actions[_ngcontent-%COMP%]   .forward-btn[_ngcontent-%COMP%]:hover{background-image:url(forward-hover.1c499bbb4cf0c10685fa.png);background-color:#d5efff}.content-actions[_ngcontent-%COMP%]   .forward-btn.clicked[_ngcontent-%COMP%]{background-image:url(forward-click.a5a963375e3133f54b2d.png)}.content-actions[_ngcontent-%COMP%]   .forward-btn.clicked[_ngcontent-%COMP%] ~ .count-forwards[_ngcontent-%COMP%], .content-actions[_ngcontent-%COMP%]   .forward-btn[_ngcontent-%COMP%]:hover ~ .count-forwards[_ngcontent-%COMP%]{color:#1da1f2}.content-actions[_ngcontent-%COMP%]   .comment-btn[_ngcontent-%COMP%]{background-image:url(comment.ce5717b99197b18fdf45.png)}.content-actions[_ngcontent-%COMP%]   .comment-btn[_ngcontent-%COMP%]:hover{background-image:url(comment-hover.c6d9d651bd12a39f75a5.png);background-color:#d5efff}.content-actions[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{font-size:14px;color:#444}"]}),t})()},yvDh:function(t,n,e){"use strict";e.d(n,"a",function(){return a});var o=e("tk/3"),i=e("vkgz"),c=e("lJxs"),s=e("AytR"),r=e("fXoL");let a=(()=>{class t{constructor(t){this.http=t}uploadProfileMedia(t,n){const e=new o.d({"Media-For":n.toString()});return this.http.post(`${s.a.apiUrl}/media/profile`,t,{headers:e}).pipe(Object(i.a)(console.log))}uploadMedia(t){return this.http.post(`${s.a.apiUrl}/media`,t).pipe(Object(c.a)(t=>t.media))}getUserMedia(t){return this.http.get(`${s.a.apiUrl}/media/${t}`).pipe(Object(c.a)(t=>t.media))}}return t.\u0275fac=function(n){return new(n||t)(r.Tb(o.b))},t.\u0275prov=r.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);