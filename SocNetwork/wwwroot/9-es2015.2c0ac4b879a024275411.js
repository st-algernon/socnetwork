(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{Sqts:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var o=n("fXoL"),i=n("ofXK");function s(t,e){if(1&t&&(o.Pb(0,"div",3),o.Lb(1,"img",4),o.Ob()),2&t){const t=e.$implicit;o.zb(1),o.dc("src",t.path,o.mc)}}const r=function(t,e,n,o){return{vertical:t,horizontal:e,sm:n,lg:o}};function a(t,e){if(1&t&&(o.Pb(0,"div",1),o.oc(1,s,2,1,"div",2),o.Ob()),2&t){const t=o.Yb();o.dc("ngClass",o.ic(2,r,2==t.photos.length,2!=t.photos.length,"small"==t.size,"large"==t.size)),o.zb(1),o.dc("ngForOf",t.photos)}}let c=(()=>{class t{constructor(){this.photos=[],this.size="small"}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=o.Eb({type:t,selectors:[["app-photos-container"]],inputs:{photos:"photos",size:"size"},decls:1,vars:1,consts:[["class","photos-container flex fw-w",3,"ngClass",4,"ngIf"],[1,"photos-container","flex","fw-w",3,"ngClass"],["class","photo-item fg-1",4,"ngFor","ngForOf"],[1,"photo-item","fg-1"],["alt","photo",3,"src"]],template:function(t,e){1&t&&o.oc(0,a,2,7,"div",0),2&t&&o.dc("ngIf",e.photos)},directives:[i.k,i.i,i.j],styles:[".photos-container[_ngcontent-%COMP%]{border-radius:15px;background-color:#f7f9fa;overflow:hidden}.photos-container.sm[_ngcontent-%COMP%]{height:168px}.photos-container.lg[_ngcontent-%COMP%]{height:228px}.photos-container[_ngcontent-%COMP%]   .photo-item[_ngcontent-%COMP%]{position:relative}.photos-container.horizontal[_ngcontent-%COMP%]{flex-direction:column}.photos-container.horizontal[_ngcontent-%COMP%]   .photo-item[_ngcontent-%COMP%]{height:50%}.photos-container.vertical[_ngcontent-%COMP%]{flex-direction:row}.photos-container.vertical[_ngcontent-%COMP%]   .photo-item[_ngcontent-%COMP%]{width:50%}.photos-container[_ngcontent-%COMP%]   .photo-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:absolute;max-width:100%;min-width:100%;max-height:100%;min-height:100%;-o-object-fit:cover;object-fit:cover;padding:.5px;box-sizing:border-box}"]}),t})()},atOm:function(t,e,n){"use strict";n.r(e),n.d(e,"ChatModule",function(){return D});var o=n("ofXK"),i=n("3Pt+"),s=n("Pxdc"),r=n("PCNd"),a=n("tyNb"),c=n("eIep"),l=n("cTBj"),h=n("dxD2"),d=n("yvDh"),g=n("fXoL"),u=n("G1Gu"),p=n("dlKe"),f=n("Sqts");function b(t,e){if(1&t&&g.Lb(0,"app-photos-container",9),2&t){const t=g.Yb();g.dc("photos",t.message.mediaDTOs)}}const m=function(t){return{"fd-rr":t}},O=function(t){return{invisible:t}},x=function(t,e,n){return{me:t,other:e,"fg-1":n}};let w=(()=>{class t{constructor(){this.mine=!1,this.invisibleAuthor=!1}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=g.Eb({type:t,selectors:[["app-message"]],inputs:{mine:"mine",message:"message",invisibleAuthor:"invisibleAuthor"},decls:12,vars:21,consts:[[1,"message-item","flex","ai-fe",3,"ngClass"],[1,"message-author",3,"ngClass"],[1,"avatar-box","square-32"],["alt","",1,"square-32",3,"src"],[1,"message-body",3,"ngClass"],[3,"photos",4,"ngIf"],[1,"message-text"],[1,"flex","jc-fe"],[1,"message-date"],[3,"photos"]],template:function(t,e){1&t&&(g.Pb(0,"div",0),g.Pb(1,"div",1),g.Pb(2,"div",2),g.Lb(3,"img",3),g.Ob(),g.Ob(),g.Pb(4,"div",4),g.oc(5,b,1,1,"app-photos-container",5),g.Pb(6,"div",6),g.qc(7),g.Ob(),g.Pb(8,"div",7),g.Pb(9,"div",8),g.qc(10),g.Zb(11,"date"),g.Ob(),g.Ob(),g.Ob(),g.Ob()),2&t&&(g.dc("ngClass",g.fc(13,m,e.mine)),g.zb(1),g.dc("ngClass",g.fc(15,O,e.invisibleAuthor)),g.Ab("data-author-id",e.message.authorDTO.id),g.zb(2),g.dc("src",e.message.authorDTO.avatarPath,g.mc),g.zb(1),g.dc("ngClass",g.hc(17,x,e.mine,!e.mine,e.message.mediaDTOs.length>0)),g.zb(1),g.dc("ngIf",e.message.mediaDTOs.length>0),g.zb(2),g.rc(e.message.text),g.zb(3),g.rc(g.ac(11,8,e.message.creationDate,"shortTime","","uk")))},directives:[o.i,o.k,f.a],pipes:[o.d],styles:[".message-item[_ngcontent-%COMP%]{margin:0 10px;padding-top:2px;z-index:2}.message-item[_ngcontent-%COMP%]:focus{outline:none}.message-author[_ngcontent-%COMP%]   .avatar-box[_ngcontent-%COMP%]{background:#eee}.message-item[_ngcontent-%COMP%]   .message-body[_ngcontent-%COMP%]{max-width:70%;border-radius:15px;color:#fff;padding:2px;position:relative}.message-item[_ngcontent-%COMP%]   .other.message-body[_ngcontent-%COMP%]{background-color:#999;margin-left:5px}.message-item[_ngcontent-%COMP%]   .me.message-body[_ngcontent-%COMP%]{background-color:#36a7ee;margin-right:5px}.message-body[_ngcontent-%COMP%]   .message-text[_ngcontent-%COMP%]{padding:5px 10px 0}.message-date[_ngcontent-%COMP%]{padding:0 10px;font-size:12px;color:#d9ecf8}"]}),t})();var P=n("668k");const C=["ngScrollbar"];function v(t,e){if(1&t&&(g.Pb(0,"div",29),g.Pb(1,"div",30),g.qc(2),g.Ob(),g.Pb(3,"div",31),g.qc(4,"14 \u0447\u0435\u0440\u0432\u043d\u044f 2021 \u043e 09:23"),g.Ob(),g.Ob()),2&t){const t=g.Yb();g.zb(2),g.rc(t.chat.title)}}function M(t,e){if(1&t&&(g.Nb(0),g.Lb(1,"app-message",32),g.Mb()),2&t){const t=e.$implicit,n=g.Yb();g.zb(1),g.dc("message",t)("mine",t.authorDTO.id===n.me.id)("invisibleAuthor",n.checkAuthorVisibility(t))}}function _(t,e){1&t&&g.Lb(0,"app-loader")}function S(t,e){if(1&t){const t=g.Qb();g.Pb(0,"div",33),g.Pb(1,"div",34),g.Wb("click",function(){return g.lc(t),g.Yb().unPreviewImages()}),g.Ob(),g.Lb(2,"app-photos-container",35),g.Ob()}if(2&t){const t=g.Yb();g.zb(2),g.dc("photos",t.previewImagesData)}}const y=function(t,e){return{"jc-fe":t,"jc-c":e}},T=[{path:"",component:(()=>{class t{constructor(t,e,n,o,i,s){this.messengerHub=t,this.chatsService=e,this.mediaService=n,this.usersService=o,this.route=i,this.resolver=s,this.subs=[],this.messagePage=1,this.previewImagesData=[],this.messageForm={text:"",images:[]}}ngOnInit(){this.subs.push(this.usersService.me$.subscribe(t=>this.me=t),this.route.params.pipe(Object(c.a)(t=>this.chatsService.getChatById(t.id))).subscribe(t=>{this.chat=t,console.log(t.messageDTOs),this.chat.messageDTOs=this.chat.messageDTOs.reverse(),this.scrollToBottom()}),this.messengerHub.message$.subscribe(t=>{t.chatId===this.chat.id&&(this.chat.messageDTOs.push(t),this.scrollToBottom())}))}ngOnDestroy(){this.subs.forEach(t=>t.unsubscribe())}ngAfterViewInit(){this.scrollToBottom()}onSubmit(t){if(!this.messageForm.text&&0==this.messageForm.images.length)return;const e={authorId:this.me.id,chatId:this.chat.id,text:this.messageForm.text,mediaDTOs:[]};if(0!=this.messageForm.images.length){const t=new FormData;[...this.messageForm.images].forEach((e,n)=>{t.set("file"+n,e,e.name)}),this.mediaService.uploadMedia(t).subscribe(t=>{e.mediaDTOs=t,this.messengerHub.sendMessage(e),this.previewImagesData=[]})}else this.messageForm.text&&this.messengerHub.sendMessage(e);this.messageForm={text:"",images:[]}}onEnterSubmit(t,e){"Enter"!=e.key||e.shiftKey||(e.preventDefault(),this.onSubmit(t))}previewImages(t){this.messageForm.images=t,this.previewImagesData=[];for(let e of t)if(e.type.match("image*")){const t=new FileReader;t.onload=t=>{this.previewImagesData.push({id:e.name,mimeType:e.type,path:t.target.result.toString(),size:e.size,creationDate:new Date(e.lastModified)})},t.readAsDataURL(e)}}unPreviewImages(){this.messageForm.images=[],this.previewImagesData=[]}resizeTextarea(t){const e=t.target;e.style.height="auto",e.style.height=5*e.scrollHeight/7+"px"}onScrollUp(){console.log("scrolled up"),this.subs.push(this.chatsService.getChatMessages(this.chat.id,++this.messagePage).subscribe(t=>{console.log(t),this.chat.messageDTOs.unshift(...t)}))}checkAuthorVisibility(t){const e=this.chat.messageDTOs.indexOf(t),n=this.chat.messageDTOs[e+1];return(null==n?void 0:n.authorDTO.id)===t.authorDTO.id}scrollToBottom(){this.ngScrollbar.scrollTo({left:0,top:this.ngScrollbar.viewport.contentWrapperElement.scrollHeight})}}return t.\u0275fac=function(e){return new(e||t)(g.Kb(l.a),g.Kb(s.a),g.Kb(d.a),g.Kb(h.a),g.Kb(a.a),g.Kb(g.j))},t.\u0275cmp=g.Eb({type:t,selectors:[["app-chat-page"]],viewQuery:function(t,e){if(1&t&&g.uc(C,3),2&t){let t;g.jc(t=g.Xb())&&(e.ngScrollbar=t.first)}},decls:31,vars:11,consts:[[1,"flex","jc-c"],[1,"chat","flex","fd-c"],[1,"chat-header","flex","fd-r","jc-sb"],["routerLink","/messenger",1,"back-btn","square-40","round","r-22"],["class","flex fd-c ai-c",4,"ngIf"],["action","","method","get",1,"search-message-form","flex","fd-c","jc-c"],["type","search","name","search_field","placeholder","Search for people and groups","autocomplete","off"],[1,"chat-body","fg-1"],["visibility","hover","appearance","standard","trackClass","scrollbar-track"],["ngScrollbar",""],["infiniteScroll","","infiniteScrollUpDistance","2","scrollViewport","",3,"scrollWindow","scrolledUp"],[1,"messages-container","flex","fd-c",3,"ngClass"],[4,"ngFor","ngForOf"],[4,"ngIf"],[1,"chat-footer"],["class","preview-container fg-1",4,"ngIf"],["novalidate","",1,"flex","fd-r","ai-fe",3,"ngSubmit"],["form","ngForm"],[1,"attach","flex","fd-r","jc-c"],[1,"add-picture-btn","round","r-20","square-28",3,"click"],["type","file","name","messageImages","ngModel","","multiple","",1,"hidden",3,"change"],["input_image",""],[1,"add-music-btn","round","r-20","square-28"],[1,"add-video-btn","round","r-22","square-28"],[1,"textarea-attach-wrap","flex","fd-r","ai-fe"],["rows","1","name","messageText","placeholder","\u041d\u0430\u043f\u0438\u0441\u0430\u0442\u0438 \u043f\u043e\u0432\u0456\u0434\u043e\u043c\u043b\u0435\u043d\u043d\u044f...",3,"ngModel","ngModelChange","keydown","input"],[1,"attach","flex","fd-r","jc-sb"],[1,"add-emoji-btn","round","r-22","square-28"],["type","submit",1,"submit-btn","square-32","fs-0",3,"disabled"],[1,"flex","fd-c","ai-c"],[1,"source-name"],[1,"last-visited"],[3,"message","mine","invisibleAuthor"],[1,"preview-container","fg-1"],[1,"close-btn","round","r-16","square-20",3,"click"],[3,"photos"]],template:function(t,e){if(1&t){const t=g.Qb();g.Pb(0,"div",0),g.Pb(1,"main",1),g.Pb(2,"section",2),g.Pb(3,"div"),g.Lb(4,"button",3),g.Ob(),g.oc(5,v,5,1,"div",4),g.Pb(6,"form",5),g.Lb(7,"input",6),g.Ob(),g.Ob(),g.Pb(8,"section",7),g.Pb(9,"ng-scrollbar",8,9),g.Pb(11,"div",10),g.Wb("scrolledUp",function(){return e.onScrollUp()}),g.Pb(12,"div",11),g.oc(13,M,2,3,"ng-container",12),g.oc(14,_,1,0,"app-loader",13),g.Ob(),g.Ob(),g.Ob(),g.Ob(),g.Pb(15,"section",14),g.Pb(16,"div",0),g.oc(17,S,3,1,"div",15),g.Ob(),g.Pb(18,"form",16,17),g.Wb("ngSubmit",function(){g.lc(t);const n=g.kc(19);return e.onSubmit(n)}),g.Pb(20,"ul",18),g.Pb(21,"li",19),g.Wb("click",function(){return g.lc(t),g.kc(23).click()}),g.Pb(22,"input",20,21),g.Wb("change",function(){g.lc(t);const n=g.kc(23);return e.previewImages(n.files)}),g.Ob(),g.Ob(),g.Lb(24,"li",22),g.Lb(25,"li",23),g.Ob(),g.Pb(26,"div",24),g.Pb(27,"textarea",25),g.Wb("ngModelChange",function(t){return e.messageForm.text=t})("keydown",function(n){g.lc(t);const o=g.kc(19);return e.onEnterSubmit(o,n)})("input",function(t){return e.resizeTextarea(t)}),g.Ob(),g.Pb(28,"ul",26),g.Lb(29,"li",27),g.Ob(),g.Ob(),g.Lb(30,"button",28),g.Ob(),g.Ob(),g.Ob(),g.Ob()}2&t&&(g.zb(5),g.dc("ngIf",e.chat),g.zb(6),g.dc("scrollWindow",!1),g.zb(1),g.dc("ngClass",g.gc(8,y,e.chat,!e.chat)),g.zb(1),g.dc("ngForOf",null==e.chat?null:e.chat.messageDTOs),g.zb(1),g.dc("ngIf",!e.chat),g.zb(3),g.dc("ngIf",e.previewImagesData.length>0),g.zb(10),g.dc("ngModel",e.messageForm.text),g.zb(3),g.dc("disabled",!e.messageForm.text&&0==e.messageForm.images.length))},directives:[a.c,o.k,i.p,i.i,i.j,u.a,p.a,u.c,o.i,o.j,i.a,i.h,i.k,w,P.a,f.a],styles:["[_nghost-%COMP%]{width:100%;display:flex;justify-content:center}ng-scrollbar[_ngcontent-%COMP%]{--scrollbar-track-color:rgba(0,0,0,0.05);--scrollbar-thumb-color:rgba(0,0,0,0.2);--scrollbar-thumb-hover-color:rgba(0,0,0,0.3);--scrollbar-size:6px}.chat[_ngcontent-%COMP%]{position:fixed;top:69px;bottom:0;width:612px;box-sizing:border-box;border-radius:15px;z-index:10;padding:0 8px;margin-right:60px}.chat[_ngcontent-%COMP%], .chat-header[_ngcontent-%COMP%]{background-color:#fff}.chat-header[_ngcontent-%COMP%]{border-radius:15px 15px 0 0;padding:6px 0 2px;min-height:40px}.chat-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]{background-image:url(back-btn.9c1816b723717b00114b.png)}.chat-header[_ngcontent-%COMP%]   .back-btn[_ngcontent-%COMP%]:hover{background-image:url(back-btn-hover.c08c2af82fa97695733f.png)}.chat-header[_ngcontent-%COMP%]   .source-name[_ngcontent-%COMP%]{font-weight:700;color:#333}.chat-header[_ngcontent-%COMP%]   .last-visited[_ngcontent-%COMP%]{font-size:13px;color:#555}.chat-header[_ngcontent-%COMP%]   .search-message-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-image:url(search.252760ca6c9f4f2926fe.png);background-position:5px;background-repeat:no-repeat;background-size:22px;background-color:transparent;border-radius:20px;padding:5px 8px 5px 32px;border:none;outline:none;width:32px;font-size:15px;transition:width .4s ease-out;cursor:pointer}.chat-header[_ngcontent-%COMP%]   .search-message-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus, .chat-header[_ngcontent-%COMP%]   .search-message-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:hover{background-image:url(search-hover.fb01d8b0e4fb8523c044.png)}.chat-header[_ngcontent-%COMP%]   .search-message-form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{width:300px}.chat-body[_ngcontent-%COMP%]{border-radius:15px;box-sizing:border-box;background-color:#f7f9fa}.chat-body[_ngcontent-%COMP%]   .messages-container[_ngcontent-%COMP%]{min-height:100%;display:flex;padding-bottom:8px}.chat-footer[_ngcontent-%COMP%]{background-color:#fff;border-radius:0 0 15px 15px;padding:10px 0;z-index:3}.chat-footer[_ngcontent-%COMP%]   .preview-container[_ngcontent-%COMP%]{position:relative;margin:0 42px 5px}.chat-footer[_ngcontent-%COMP%]   .preview-container[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{position:absolute;right:5px;top:5px;background-image:url(plus-hover.c5a44e580f069dae6603.png);background-color:#fff;transform:rotate(45deg);border:1px solid #eee;outline:none;z-index:10}.chat-footer[_ngcontent-%COMP%]   .textarea-attach-wrap[_ngcontent-%COMP%]{width:100%;border-radius:15px;border:1px solid #eee;margin:0 10px}.chat-footer[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{padding:4px 10px;font-size:17px;height:20px;line-height:20px}.chat-footer[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]{background:url(send.5f6c618067a4dc880a72.png) no-repeat;background-size:contain;cursor:pointer}.chat-footer[_ngcontent-%COMP%]   .submit-btn[_ngcontent-%COMP%]:disabled{background:url(send-disable.3c62a814f1c85dc4bfd5.png) no-repeat;background-size:contain}.attach[_ngcontent-%COMP%]{list-style:none}.attach[_ngcontent-%COMP%]   .add-picture-btn[_ngcontent-%COMP%]{background-image:url(picture.8bab62ef09da605e0ddf.png)}.attach[_ngcontent-%COMP%]   .add-music-btn[_ngcontent-%COMP%]{background-image:url(add-music.9a4176a08125a911c279.png)}.attach[_ngcontent-%COMP%]   .add-video-btn[_ngcontent-%COMP%]{background-image:url(add-video.07c28269d0df8adddcda.png)}.attach[_ngcontent-%COMP%]   .add-emoji-btn[_ngcontent-%COMP%]{background-image:url(emoji.a281a630f75958ce1961.png)}@media screen and (min-width:1024px) and (max-width:1224px){.chat[_ngcontent-%COMP%]{width:49.5%;margin-right:6%}}@media screen and (min-width:768px) and (max-width:1024px){.chat[_ngcontent-%COMP%]{width:56%;margin-right:25%}}@media screen and (min-width:320px) and (max-width:768px){.chat[_ngcontent-%COMP%]{width:86%;margin-left:73px;margin-right:0;bottom:0}}"]}),t})()}];let k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.Ib({type:t}),t.\u0275inj=g.Hb({imports:[[a.f.forChild(T)],a.f]}),t})(),D=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=g.Ib({type:t}),t.\u0275inj=g.Hb({providers:[s.a],imports:[[k,i.f,o.b,u.b,r.a,p.b]]}),t})()},dlKe:function(t,e,n){"use strict";n.d(e,"a",function(){return D}),n.d(e,"b",function(){return z});var o=n("fXoL"),i=n("LRne"),s=n("xgIS"),r=n("5+tZ"),a=n("lJxs"),c=n("vkgz"),l=n("pLZG"),h=n("7o/Q"),d=n("D0XW");n("zx2A");const g={leading:!0,trailing:!1};class u{constructor(t,e,n,o){this.duration=t,this.scheduler=e,this.leading=n,this.trailing=o}call(t,e){return e.subscribe(new p(t,this.duration,this.scheduler,this.leading,this.trailing))}}class p extends h.a{constructor(t,e,n,o,i){super(t),this.duration=e,this.scheduler=n,this.leading=o,this.trailing=i,this._hasTrailingValue=!1,this._trailingValue=null}_next(t){this.throttled?this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0):(this.add(this.throttled=this.scheduler.schedule(f,this.duration,{subscriber:this})),this.leading?this.destination.next(t):this.trailing&&(this._trailingValue=t,this._hasTrailingValue=!0))}_complete(){this._hasTrailingValue?(this.destination.next(this._trailingValue),this.destination.complete()):this.destination.complete()}clearThrottle(){const t=this.throttled;t&&(this.trailing&&this._hasTrailingValue&&(this.destination.next(this._trailingValue),this._trailingValue=null,this._hasTrailingValue=!1),t.unsubscribe(),this.remove(t),this.throttled=null)}}function f(t){const{subscriber:e}=t;e.clearThrottle()}function b(t,e,n,o){const i=window&&!!window.document&&window.document.documentElement;let s=i&&e?window:n;if(t&&(s=t&&i&&"string"==typeof t?function(t,e,n){return(n?window.document:e).querySelector(t)}(t,n.nativeElement,o):t,!s))throw new Error("ngx-infinite-scroll {resolveContainerElement()}: selector for");return s}function m(t){return t&&!t.firstChange}const O={clientHeight:"clientHeight",offsetHeight:"offsetHeight",scrollHeight:"scrollHeight",pageYOffset:"pageYOffset",offsetTop:"offsetTop",scrollTop:"scrollTop",top:"top"},x={clientHeight:"clientWidth",offsetHeight:"offsetWidth",scrollHeight:"scrollWidth",pageYOffset:"pageXOffset",offsetTop:"offsetLeft",scrollTop:"scrollLeft",top:"left"};class w{constructor(t=!0){this.vertical=t,this.propsMap=t?O:x}clientHeightKey(){return this.propsMap.clientHeight}offsetHeightKey(){return this.propsMap.offsetHeight}scrollHeightKey(){return this.propsMap.scrollHeight}pageYOffsetKey(){return this.propsMap.pageYOffset}offsetTopKey(){return this.propsMap.offsetTop}scrollTopKey(){return this.propsMap.scrollTop}topKey(){return this.propsMap.top}}function P(t){return["Window","global"].some(e=>Object.prototype.toString.call(t).includes(e))}function C(t,e){return t?e.document.documentElement:null}function v(t,e){const n=function({container:t,isWindow:e,axis:n}){const{offsetHeightKey:o,clientHeightKey:i}=M(n);return _(t,e,o,i)}(e);return e.isWindow?function(t,e,n){const{axis:o,container:i,isWindow:s}=n,{offsetHeightKey:r,clientHeightKey:a}=M(o),c=t+S(C(s,i),o,s),l=_(e.nativeElement,s,r,a);return{height:t,scrolled:c,totalToScroll:function(t,e,n){const o=e.topKey();if(t.getBoundingClientRect)return t.getBoundingClientRect()[o]+S(t,e,n)}(e.nativeElement,o,s)+l,isWindow:s}}(n,t,e):function(t,e,n){const{axis:o,container:i}=n;return{height:t,scrolled:i[o.scrollTopKey()],totalToScroll:i[o.scrollHeightKey()],isWindow:!1}}(n,0,e)}function M(t){return{offsetHeightKey:t.offsetHeightKey(),clientHeightKey:t.clientHeightKey()}}function _(t,e,n,o){if(isNaN(t[n])){const n=C(e,t);return n?n[o]:0}return t[n]}function S(t,e,n){const o=e.pageYOffsetKey(),i=e.scrollTopKey(),s=e.offsetTopKey();return isNaN(window.pageYOffset)?C(n,t)[i]:t.ownerDocument?t.ownerDocument.defaultView[o]:t[s]}function y(t,e,n){let o,i;if(t.totalToScroll<=0)return!1;const s=t.isWindow?t.scrolled:t.height+t.scrolled;return n?(o=(t.totalToScroll-s)/t.totalToScroll,i=e.down/10):(o=t.scrolled/(t.scrolled+(t.totalToScroll-s)),i=e.up/10),o<=i}class T{constructor({totalToScroll:t}){this.lastScrollPosition=0,this.lastTotalToScroll=0,this.totalToScroll=0,this.triggered={down:0,up:0},this.totalToScroll=t}updateScrollPosition(t){return this.lastScrollPosition=t}updateTotalToScroll(t){this.lastTotalToScroll!==t&&(this.lastTotalToScroll=this.totalToScroll,this.totalToScroll=t)}updateScroll(t,e){this.updateScrollPosition(t),this.updateTotalToScroll(e)}updateTriggeredFlag(t,e){e?this.triggered.down=t:this.triggered.up=t}isTriggeredScroll(t,e){return e?this.triggered.down===t:this.triggered.up===t}}function k(t){const{scrollDown:e,stats:{scrolled:n}}=t;return{type:e?"[NGX_ISE] DOWN":"[NGX_ISE] UP",payload:{currentScrollPosition:n}}}let D=(()=>{class t{constructor(t,e){this.element=t,this.zone=e,this.scrolled=new o.n,this.scrolledUp=new o.n,this.infiniteScrollDistance=2,this.infiniteScrollUpDistance=1.5,this.infiniteScrollThrottle=150,this.infiniteScrollDisabled=!1,this.infiniteScrollContainer=null,this.scrollWindow=!0,this.immediateCheck=!1,this.horizontal=!1,this.alwaysCallback=!1,this.fromRoot=!1}ngAfterViewInit(){this.infiniteScrollDisabled||this.setup()}ngOnChanges({infiniteScrollContainer:t,infiniteScrollDisabled:e,infiniteScrollDistance:n}){const o=m(t),i=m(e),s=m(n),r=!i&&!this.infiniteScrollDisabled||i&&!e.currentValue||s;(o||i||s)&&(this.destroyScroller(),r&&this.setup())}setup(){"undefined"!=typeof window&&this.zone.runOutsideAngular(()=>{this.disposeScroller=function(t){const{scrollContainer:e,scrollWindow:n,element:o,fromRoot:h}=t,p=function({windowElement:t,axis:e}){return function(t,e){const n=t.isWindow||e&&!e.nativeElement?e:e.nativeElement;return Object.assign(Object.assign({},t),{container:n})}({axis:e,isWindow:P(t)},t)}({axis:new w(!t.horizontal),windowElement:b(e,n,o,h)}),f=new T({totalToScroll:v(o,p)}),m={up:t.upDistance,down:t.downDistance};return function(t){let e=Object(s.a)(t.container,"scroll");return t.throttle&&(e=e.pipe(function(t,e=d.a,n=g){return o=>o.lift(new u(t,e,n.leading,n.trailing))}(t.throttle))),e}({container:p.container,throttle:t.throttle}).pipe(Object(r.a)(()=>Object(i.a)(v(o,p))),Object(a.a)(t=>function(t,e,n){const{scrollDown:o,fire:i}=function(t,e,n){const o=function(t,e){return t<e.scrolled}(t,e);return{fire:y(e,n,o),scrollDown:o}}(t,e,n);return{scrollDown:o,fire:i,stats:e}}(f.lastScrollPosition,t,m)),Object(c.a)(({stats:t})=>f.updateScroll(t.scrolled,t.totalToScroll)),Object(l.a)(({fire:e,scrollDown:n,stats:{totalToScroll:o}})=>function(t,e,n){return!(!t||!e)||!(n||!e)}(t.alwaysCallback,e,f.isTriggeredScroll(o,n))),Object(c.a)(({scrollDown:t,stats:{totalToScroll:e}})=>{f.updateTriggeredFlag(e,t)}),Object(a.a)(k))}({fromRoot:this.fromRoot,alwaysCallback:this.alwaysCallback,disable:this.infiniteScrollDisabled,downDistance:this.infiniteScrollDistance,element:this.element,horizontal:this.horizontal,scrollContainer:this.infiniteScrollContainer,scrollWindow:this.scrollWindow,throttle:this.infiniteScrollThrottle,upDistance:this.infiniteScrollUpDistance}).subscribe(t=>this.zone.run(()=>this.handleOnScroll(t)))})}handleOnScroll({type:t,payload:e}){switch(t){case"[NGX_ISE] DOWN":return this.scrolled.emit(e);case"[NGX_ISE] UP":return this.scrolledUp.emit(e);default:return}}ngOnDestroy(){this.destroyScroller()}destroyScroller(){this.disposeScroller&&this.disposeScroller.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(o.Kb(o.l),o.Kb(o.A))},t.\u0275dir=o.Fb({type:t,selectors:[["","infiniteScroll",""],["","infinite-scroll",""],["","data-infinite-scroll",""]],inputs:{infiniteScrollDistance:"infiniteScrollDistance",infiniteScrollUpDistance:"infiniteScrollUpDistance",infiniteScrollThrottle:"infiniteScrollThrottle",infiniteScrollDisabled:"infiniteScrollDisabled",infiniteScrollContainer:"infiniteScrollContainer",scrollWindow:"scrollWindow",immediateCheck:"immediateCheck",horizontal:"horizontal",alwaysCallback:"alwaysCallback",fromRoot:"fromRoot"},outputs:{scrolled:"scrolled",scrolledUp:"scrolledUp"},features:[o.xb]}),t})(),z=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=o.Ib({type:t}),t.\u0275inj=o.Hb({providers:[],imports:[[]]}),t})()},yvDh:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var o=n("tk/3"),i=n("vkgz"),s=n("lJxs"),r=n("AytR"),a=n("fXoL");let c=(()=>{class t{constructor(t){this.http=t}uploadProfileMedia(t,e){const n=new o.d({"Media-For":e.toString()});return this.http.post(`${r.a.apiUrl}/media/profile`,t,{headers:n}).pipe(Object(i.a)(console.log))}uploadMedia(t){return this.http.post(`${r.a.apiUrl}/media`,t).pipe(Object(s.a)(t=>t.media))}getUserMedia(t){return this.http.get(`${r.a.apiUrl}/media/${t}`).pipe(Object(s.a)(t=>t.media))}}return t.\u0275fac=function(e){return new(e||t)(a.Tb(o.b))},t.\u0275prov=a.Gb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()}}]);